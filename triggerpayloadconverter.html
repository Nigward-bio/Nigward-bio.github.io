<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 FiveM Event Parser & Converter 🚀</title>
    <link rel="icon" href="chomik.jpg" type="image/jpeg"> <!-- Favicon -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #121212; /* Dark background */
            color: #ffffff; /* Light text */
            background-size: cover;
            background-position: center;
            transition: background-image 1s ease-in-out; /* Smooth transition */
        }
        .container {
            text-align: center;
            background-color: rgba(30, 30, 30, 0.8); /* Semi-transparent dark container background */
            padding: 40px; /* Increased padding to make the container bigger */
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 80%; /* Increased width */
            max-width: 800px; /* Optional: Set a maximum width */
        }
        input {
            padding: 10px;
            width: 100%; /* Make input take full width of the container */
            font-size: 16px;
            background-color: #333; /* Dark input background */
            color: #ffffff; /* Light text */
            border: 1px solid #444; /* Dark border */
            border-radius: 5px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff; /* Blue button */
            color: #ffffff; /* Light text */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }
        #output {
            margin-top: 20px;
            font-size: 18px;
            color: #ffffff; /* Light text */
            text-align: left;
            white-space: pre-wrap; /* Preserve formatting */
        }
        .big-text {
            font-size: 32px;
            font-weight: bold;
            color: #ff0000; /* Red color */
            margin-bottom: 20px;
        }
        .discord-link {
            font-size: 18px;
            color: #7289da; /* Discord blue color */
            margin-top: 20px;
            text-decoration: none;
        }
        .discord-link:hover {
            text-decoration: underline;
        }
        .redirect-link {
            font-size: 18px;
            color: #00ff00; /* Green color */
            margin-top: 10px; /* Reduced margin to bring it closer to the Discord link */
            text-decoration: none;
        }
        .redirect-link:hover {
            text-decoration: underline;
        }
        .error-message {
            color: #ff0000; /* Red color */
            font-weight: bold;
            margin-top: 10px;
        }
        #copyButton {
            padding: 5px 10px;
            font-size: 14px;
            background-color: #007bff; /* Blue button */
            color: #ffffff; /* Light text */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        #copyButton:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }

        /* New overlay for the text and screen */
        #text-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px); /* Blur effect */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* Higher z-index to ensure it's on top */
            color: white;
            font-size: 2em;
            cursor: pointer;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        /* Hide the text overlay after click */
        #text-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Mute Button */
        #muteButton {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(30, 30, 30, 0.8); /* Same as container */
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px; /* Same as container */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Same as container */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999; /* Lower z-index to ensure it's under the overlay */
        }

        #muteButton img {
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body>
    <!-- Text Overlay -->
    <div id="text-overlay">
        Click anywhere to start
    </div>

    <!-- Mute Button -->
    <button id="muteButton">
        <img src="mute.png" alt="Mute">
    </button>

    <!-- Audio Element -->
    <audio id="background-music" src="jojo.mp3" loop></audio>

    <div class="container">
        <div class="big-text">𝐅𝐔𝐂𝐊 𝐉𝐀𝐘𝐓𝐇𝐀𝐀𝐆𝐀𝐌𝐄𝐑 𝐀𝐍𝐃 𝐇𝐈𝐒 𝐀𝐈 𝐏𝐀𝐈𝐃 𝐒𝐇𝐈𝐓</div>
        <h1>FiveM Event Parser & Converter</h1>
        <input type="text" id="inputBox" placeholder="Enter TriggerServerEvent or EventName[params]">
        <button id="convertButton">Convert</button>
        <div id="output"></div>
        <div id="errorMessage" class="error-message"></div>
        <a href="https://discord.gg/3pYc4cRCGP" class="discord-link" target="_blank">Join My Discord</a>
        <br> <!-- Force a new line -->
        <a href="index.html" class="redirect-link">Go back to the main page</a>
    </div>

    <script>
        // Function to remove unnecessary spaces
        function cleanInput(input) {
            return input.replace(/\s+/g, ''); // Remove all spaces
        }

        // Function to detect and parse the input
        function parseInput(input) {
            const cleanedInput = cleanInput(input);

            // Check if it's already a TriggerServerEvent
            const triggerRegex = /Trigger(?:Server)?Event\((['"])([^'"]+)\1(?:,([^)]+))?\)/;
            const triggerMatch = cleanedInput.match(triggerRegex);

            if (triggerMatch) {
                const eventName = triggerMatch[2];
                const parameters = triggerMatch[3] ? parseParameters(triggerMatch[3]) : [];
                return { eventName, parameters, type: 'trigger' };
            }

            // Check if it's a parsed event (eventName[params])
            const parsedRegex = /^([\w:]+)\[([^\]]+)\]$/;
            const parsedMatch = cleanedInput.match(parsedRegex);

            if (parsedMatch) {
                const eventName = parsedMatch[1];
                const parameters = parseParameters(parsedMatch[2]);
                return { eventName, parameters, type: 'parsed' };
            }

            return null;
        }

        // Function to parse parameters (mixed types: strings, numbers, variables, etc.)
        function parseParameters(params) {
            try {
                // Split parameters by commas, but ignore commas inside quotes or brackets
                const paramList = params.match(/(?:[^,"']+|"[^"]*"|'[^']*')+/g) || [];
                return paramList.map(param => {
                    // Remove surrounding quotes if present
                    if ((param.startsWith('"') && param.endsWith('"')) || (param.startsWith("'") && param.endsWith("'"))) {
                        return param.slice(1, -1);
                    }
                    // Parse numbers
                    if (!isNaN(param)) {
                        return parseFloat(param);
                    }
                    // Return as-is (e.g., variables like AMOUNT)
                    return param;
                });
            } catch (error) {
                console.error("Error parsing parameters:", error);
                return [];
            }
        }

        // Function to convert parsed event into TriggerServerEvent format
        function convertToTriggerServerEvent(eventName, parameters) {
            if (parameters.length === 0) {
                return `TriggerServerEvent('${eventName}')`;
            }
            return `TriggerServerEvent('${eventName}',${parameters.map(param => typeof param === 'string' ? `'${param}'` : param).join(',')})`;
        }

        // Function to convert TriggerServerEvent into parsed event format
        function convertToParsedEvent(eventName, parameters) {
            if (parameters.length === 0) {
                return `${eventName}[]`;
            }
            return `${eventName}[${parameters.map(param => typeof param === 'string' ? `'${param}'` : param).join(',')}]`;
        }

        // Function to format the output as "Event Name: ... Parameters: [...]"
        function formatEventDetails(eventName, parameters) {
            return `Event Name: ${eventName}\nParameters: [${parameters.map(param => typeof param === 'string' ? `'${param}'` : param).join(', ')}]`;
        }

        // Function to copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            }).catch(() => {
                alert('Failed to copy. Please manually copy the text.');
            });
        }

        // Array of emojis to loop through
        const emojis = ['🚀', '🎮', '🔥', '✨', '💻', '🛠️', '🎉', '🌟', '⚡', '👾', '🕹️', '🎲', '🔧', '🔨', '💥', '🌈', '🌌', '🌠', '🪐', '🌍'];

        // Function to update the page title with random emojis
        function updatePageTitle() {
            const emoji1 = emojis[Math.floor(Math.random() * emojis.length)];
            const emoji2 = emojis[Math.floor(Math.random() * emojis.length)];
            document.title = `${emoji1} FiveM Event Parser & Converter ${emoji2}`;
        }

        // Update the page title every 1 second
        setInterval(updatePageTitle, 1000);

        // Function to cycle through background GIFs
        function cycleBackgroundGifs() {
            const gifs = [
                'loop/gif1.gif',
                'loop/gif2.gif',
                'loop/gif3.gif',
                'loop/gif4.gif',
                'loop/gif5.gif',
                'loop/gif6.gif',
                'loop/gif7.gif',
                'loop/gif8.gif'
            ]; // Paths to the GIFs in the 'loop' folder

            // Set the first GIF immediately
            document.body.style.backgroundImage = `url('${gifs[0]}')`;

            let index = 1; // Start from the second GIF
            setInterval(() => {
                document.body.style.backgroundImage = `url('${gifs[index]}')`;
                index = (index + 1) % gifs.length; // Loop back to the first GIF after the last one
            }, 10000); // Change GIF every 10 seconds
        }

        // Start the background GIF loop
        cycleBackgroundGifs();

        // Event listener for the convert button
        document.getElementById('convertButton').addEventListener('click', function() {
            const input = document.getElementById('inputBox').value;
            const output = document.getElementById('output');
            const errorMessage = document.getElementById('errorMessage');
            const result = parseInput(input);

            if (result) {
                let convertedValue;
                let outputText;
                let copyText;
                if (result.type === 'trigger') {
                    // Convert TriggerServerEvent to parsed event
                    convertedValue = convertToParsedEvent(result.eventName, result.parameters);
                    // Display event details for TriggerServerEvent input
                    outputText = `<strong>Event Details:</strong>\n${formatEventDetails(result.eventName, result.parameters)}`;
                    // Set copy text to the event details format
                    copyText = convertedValue;
                } else if (result.type === 'parsed') {
                    // Convert parsed event to TriggerServerEvent
                    convertedValue = convertToTriggerServerEvent(result.eventName, result.parameters);
                    // Display TriggerServerEvent for parsed event input
                    outputText = `<strong>TriggerServerEvent:</strong>\n${convertedValue}`;
                    // Set copy text to the TriggerServerEvent format
                    copyText = convertedValue;
                }
                // Update the input box with the converted value
                document.getElementById('inputBox').value = convertedValue;
                // Display the output and Copy button
                output.innerHTML = `${outputText}<br><button id="copyButton" style="background-color: #007bff;">Copy</button>`;
                // Add event listener to the copy button
                document.getElementById('copyButton').addEventListener('click', function() {
                    copyToClipboard(copyText);
                });
                errorMessage.innerHTML = '';
            } else {
                output.innerHTML = '';
                errorMessage.innerHTML = 'Invalid input. Please enter a valid TriggerServerEvent or EventName[params].';
            }
        });

        // Overlay and Music
        const overlay = document.getElementById('text-overlay');
        const backgroundMusic = document.getElementById('background-music');

        overlay.addEventListener('click', () => {
            console.log('Overlay clicked'); // Debugging
            overlay.classList.add('hidden');
            backgroundMusic.play();
        });

        // Ensure the overlay is visible on page load
        window.onload = () => {
            overlay.style.display = 'flex';
        };

        // Mute/Unmute Button Functionality
        const muteButton = document.getElementById('muteButton');
        muteButton.addEventListener('click', () => {
            if (backgroundMusic.muted) {
                backgroundMusic.muted = false;
                muteButton.innerHTML = '<img src="mute.png" alt="Mute">';
            } else {
                backgroundMusic.muted = true;
                muteButton.innerHTML = '<img src="unmute.png" alt="Unmute">';
            }
        });
    </script>
</body>
</html>